<div class="user-manage-edit">
    <div class="col-md-7">
        <div class="title-user">
            用户基本信息
        </div>
        <form class="col-md-6" name="userForm1" novalidate>
            <div class="form-group col-md-12">
                <label class="col-md-3 required-filed">登入名称</label>
                <div class="col-md-9">
                    <input class="form-control" type="text" ng-model="changeUser.loginName" required ng-disabled="!isNew" />
                </div>
            </div>
            <div class="form-group col-md-12">
                <label class="col-md-3 required-filed">用户名</label>
                <div class="col-md-9">
                    <input class="form-control" type="text" ng-model="changeUser.localName" required />
                </div>
            </div>
            <div class="form-group col-md-12">
                <label class="col-md-3">拼音</label>
                <div class="col-md-9">
                    <input class="form-control" type="text" ng-model="changeUser.englishName" />
                </div>
            </div>
            <div class="form-group col-md-12">
                <label class="col-md-3">电话</label>
                <div class="col-md-9">
                    <input class="form-control" type="text" ng-model="changeUser.telephone" ng-pattern="/(^(\d{3,4}-)?\d{7,8})$|(1[3,5,7,8][0-9]{9})/" />
                </div>
            </div>
            <div class="form-group col-md-12">
                <label class="col-md-3">手机</label>
                <div class="col-md-9">
                    <input class="form-control" type="text" ng-model="changeUser.mobile" ng-pattern="/(^(\d{3,4}-)?\d{7,8})$|(1[3,5,7,8][0-9]{9})/" />
                </div>
            </div>
            <div class="form-group col-md-12">
                <label class="col-md-3">电子邮件</label>
                <div class="col-md-9">
                    <input class="form-control" type="email" ng-model="changeUser.email" />
                </div>
            </div>
            <div class="form-group col-md-12">
                <label class="col-md-3">医院</label>
                <div class="col-md-9">
                    <select class="form-control" ng-model="changeUser.domain" ng-options="h for h in hospitalList" ng-disabled="!isNew"></select>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label class="col-md-3 required-filed">角色</label>
                <div class="col-md-9">
                    <select kendo-multi-select k-options="roleEditSelectOptions"
                            k-ng-model="changeUser.rolesName"
                            k-data-bound="noDataFound"></select>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label class="col-md-3 required-filed">影像科室</label>
                <div class="col-md-9">
                    <select class="form-control" 
                            ng-model="changeUser.department" 
                            ng-options="depart.text as depart.value for depart in departs" 
                            required></select>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label class="col-md-3 required-filed">域名</label>
                <div class="col-md-9">
                    <input class="form-control" type="text" ng-model="changeUser.domainLoginName" required />
                </div>
            </div>
            <div class="form-group col-md-12">
                <label class="col-md-3">职称</label>
                <div class="col-md-9">
                    <select class="form-control" ng-model="changeUser.title" ng-options="t.text as t.value for t in titleList"></select>
                </div>
            </div>
        </form>
        <form class="col-md-6" name="userForm2" novalidate>
            <div class="form-group col-md-12">
                <label class="col-md-3">地址</label>
                <div class="col-md-9">
                    <input class="form-control address" type="text" ng-model="changeUser.address" />
                </div>
            </div>
            <div class="form-group col-md-12">
                <label class="col-md-3">备注</label>
                <div class="col-md-9">
                    <input class="form-control address" ng-model="changeUser.comments" />
                </div>
            </div>
            <div class="form-group col-md-12">
                <label class="col-md-4">
                    <input type="checkbox" ng-model="changeUser.isSetExpireDate" />
                    是否有效
                </label>
            </div>
            <div class="form-group col-md-12" style="height:39px;">
                <label class="col-md-3">起始日</label>
                <div class='col-md-9'>
                    <input autocomplete="off" id="patientTimeStart"
                           kendo-date-picker="patientTimeStart" ng-model="modalOption.startDate"
                           ng-disabled="!changeUser.isSetExpireDate"/>
                </div>
                
            </div>
            <div class="form-group col-md-12" style="height:39px;">
                <label class="col-md-3">截止日</label>
                <div class='col-md-9'>
                    <input autocomplete="off" id="patientTimeEnd"
                           kendo-date-picker="patientTimeEnd" ng-model="modalOption.endDate"
                           ng-disabled="!changeUser.isSetExpireDate"/>
                </div>
            </div>
            <div class="form-group col-md-12">
                <label class="col-md-3" ng-class="{'required-filed':isNew}">{{modalOption.passwordText}}</label>
                <div class="col-md-9">
                    <input class="form-control" type="password" ng-model="modalOption.newPassword" ng-required="isNew" />
                </div>
            </div>
            <div class="form-group col-md-12">
                <label class="col-md-3" ng-class="{'required-filed':isNew}">{{modalOption.confirmText}}</label>
                <div class="col-md-9">
                    <input class="form-control" type="password" ng-model="modalOption.confirmPassword" ng-required="isNew" />
                </div>
            </div>
            <div class="form-group col-md-12" ng-show="!isNew">
                <label class="col-md-3">可见站点</label>
                <div class="col-md-9">
                    <select kendo-multi-select
                            k-value-primitive="true"
                            k-auto-bind="false"
                            k-data-bound="noDataFound"
                            k-ng-model="changeUser.userProfileList[accessIndex].Value"
                            k-data-source="siteList"></select>
                </div>
            </div>
            <div class="form-group col-md-12" ng-if="!isNew">
                <label class="col-md-3 required-filed">所属站点</label>
                <div class="col-md-9">
                    <select class="form-control"
                            required
                            ng-options=" s for s in siteList"
                            ng-model="changeUser.userProfileList[belongIndex].Value[0]"></select>
                </div>
            </div>
            <div class="form-group col-md-12" ng-show="isNew">
                <label class="col-md-3">可见站点</label>
                <div class="col-md-9">
                    <select kendo-multi-select
                            k-value-primitive="true"
                            k-auto-bind="false"
                            k-data-bound="noDataFound"
                            k-on-change="siteChange()"
                            k-ng-model="changeUser.accessSites"
                            k-data-source="siteList"></select>
                </div>
            </div>
            <div class="form-group col-md-12" ng-if="isNew">
                <label class="col-md-3 required-filed">所属站点</label>
                <div class="col-md-9">
                    <select class="form-control"
                            required
                            ng-options=" s for s in siteList"
                            ng-model="changeUser.site"></select>
                </div>
            </div>  
        </form>
        <div class="form-group col-md-12" style="margin-top:30px;">
            <label class="col-md-2 col-md-offset-6">
                <input type="checkbox" ng-model="changeUser.isLocked" ng-true-value="true" ng-false-value="false" />
                锁定
            </label>
            <div class="col-md-4">
                <button type="button" class="btn btn-primary" ng-click="clickUserCancel()">取消</button>
                <button type="button" class="btn btn-primary" ng-click="cliclUserOk()" ng-disabled="userForm1.$invalid || userForm2.$invalid">确定</button>
            </div>
        </div>
    </div>
    <div class="col-md-1 left-accor" ng-show="!isNew && !isAllot">
        <a class="accordion-toggle" data-toggle="collapse" href="#right" ng-init="isLeft=true;" ng-click="isLeft=!isLeft">
            <span class="glyphicon" ng-class="{true:'glyphicon-chevron-right',false:'glyphicon-chevron-left'}[isLeft]"></span>
        </a>
    </div>
    <div class="col-md-4 panel-collapse collapse in" id="right" ng-show="!isNew && !isAllot">
        <div class="title-user">
            权限配置
        </div>
        <div class="qxmain">
            <div class="zhushi">
                注释：{{selectedUserProfile.PropertyDesc}}
            </div>
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" href="#all" ng-init="isDown=true;" ng-click="isDown=!isDown">
                        <span class="glyphicon" ng-class="{true:'glyphicon-chevron-up',false:'glyphicon-chevron-down'}[isDown]"></span>
                        <span>全局</span>
                    </a>
                </div>
                <div id="all" class="accordion-body collapse in">
                    <div class="accordion-inner">
                        <table class="table" style="margin-bottom: 0;">
                            <tr ng-repeat="userProfile in  changeUser.userProfileList"
                                ng-click="userProfileClick(userProfile)"
                                ng-class="{'configuration-active':userProfile.selected}"
                                ng-show="userProfile.Name !== 'BelongToSite' && userProfile.Name !== 'AccessSite'">
                                <td title="{{userProfile.Name}}">
                                    <div class="col-md-11 user-profile">{{userProfile.Name}}</div>
                                    <div class="col-md-1" ng-show="userProfile.isChange"><span>*</span></div>
                                </td>
                                <td ng-show="userProfile.PropertyType==='5'">
                                    <span title="{{userProfile.selectValue}}" ng-show="!userProfile.selected">{{userProfile.selectValue}}</span>
                                    <select ng-show="userProfile.selected" kendo-multi-select
                                            k-value-primitive="true"
                                            k-auto-bind="false"
                                            k-data-bound="noDataFound"
                                            k-on-change="userProfileChange(userProfile)"
                                            k-ng-model="userProfile.Value"
                                            k-data-source="userProfile.selectOptions"></select>
                                </td>
                                <td ng-show="userProfile.PropertyType==='11'">
                                    <span ng-model="userProfile.Value">{{userProfile.Value==='1'?'是':'否'}}</span>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>